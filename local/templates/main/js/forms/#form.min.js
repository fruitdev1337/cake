"use strict";
!function() {
    const e = document.querySelector(".js-founders-add")
      , t = document.querySelector(".js-founders");
    e.addEventListener("click", (()=>{
        t.insertAdjacentHTML("beforeend", '<div class="form__row">\n        <div class="form__label">\n          <label>Фамилия</label>\n        </div>\n\n        <div class="form__control">\n          <input class="form__input  form__element" type="text" placeholder="Введите фамилию">\n\n          <div class="form__hint">\n            Введите фамилию\n          </div>\n        </div>\n      </div>\n\n      <div class="form__row">\n        <div class="form__label">\n          <label>Имя</label>\n        </div>\n\n        <div class="form__control">\n          <input class="form__input  form__element" type="text" placeholder="Введите имя">\n\n          <div class="form__hint">\n            Введите имя\n          </div>\n        </div>\n      </div>\n\n      <div class="form__row">\n        <div class="form__label">\n          <label>Отчество</label>\n        </div>\n\n        <div class="form__control">\n          <input class="form__input  form__element" type="text" placeholder="Введите отчество">\n\n          <div class="form__hint">\n            Введите отчество\n          </div>\n        </div>\n      </div>\n\n      <div class="form__row">\n        <div class="form__label">\n          <label>Гражданство</label>\n        </div>\n\n        <div class="form__control">\n          <input class="form__input  form__element" type="text" placeholder="Введите гражданство">\n\n          <div class="form__hint">\n            Введите гражданство\n          </div>\n        </div>\n      </div>\n\n      <div class="form__row">\n        <div class="form__label">\n          <label>Адрес</label>\n        </div>\n\n        <div class="form__control">\n          <input class="form__input  form__element" type="text" placeholder="Введите адрес">\n\n          <div class="form__hint">\n            Введите адрес\n          </div>\n        </div>\n      </div>')
    }
    ))
}(),
/*
function() {
    const e = document.querySelector(".js-opening-hours-add")
      , t = document.querySelector(".js-opening-hours-body");
    e.addEventListener("click", (()=>{
        document.querySelectorAll(".js-opening-hours").length <= 6 && t.insertAdjacentHTML("beforeend", '<div class="form__control  js-opening-hours">\n        <div class="opening-hours">\n          <div class="opening-hours__select">\n            <select class="form__select">\n              <option value="Monday">Понедельник</option>\n              <option value="Tuesday">Вторник</option>\n              <option value="Wednesday">Среда</option>\n              <option value="Thursday">Четверг</option>\n              <option value="Friday">Пятница</option>\n              <option value="Saturday">Суббота</option>\n              <option value="Sunday">Воскресенье</option>\n            </select>\n          </div>\n          \n          <div class="opening-hours__divider">с</div>\n\n          <div class="opening-hours__input">\n            <input class="form__input" type="text" placeholder="XX:XX">\n          </div>\n\n          <div class="opening-hours__divider">по</div>\n\n          <div class="opening-hours__input">\n            <input class="form__input" type="text" placeholder="XX:XX">\n          </div>\n        </div>\n      </div>')
    }
    ))
}(),
*/
function() {
    const e = document.querySelectorAll(".input-place")
      , t = document.querySelector(".js-add-places")
      , n = document.querySelector(".js-remove-places");
    let l = [];
    const s = document.querySelector(".registration-form__tag ul");
    document.querySelector(".js-all-places").addEventListener("change", (()=>{
        document.querySelector(".js-all-places").checked ? e.forEach((e=>{
            e.checked = !0
        }
        )) : e.forEach((e=>{
            e.checked = !1,
            document.querySelector(".js-all-prices").value = ""
        }
        ))
    }
    )),
    t.addEventListener("click", (()=>{
        for (e.forEach((e=>{
            if (document.querySelector(".js-all-places").checked)
                if (e.checked && e.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild.value) {
                    const t = new Object;
                    t.district = e.nextElementSibling.innerText,
                    t.price = e.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild.value,
                    l.push(t),
                    document.querySelector(".delivery__collapse").classList.remove("delivery__collapse--show")
                } else if (e.checked && document.querySelector(".js-all-prices").value) {
                    e.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild.value = document.querySelector(".js-all-prices").value;
                    const t = new Object;
                    t.district = e.nextElementSibling.innerText,
                    t.price = document.querySelector(".js-all-prices").value,
                    l.push(t),
                    document.querySelector(".delivery__collapse").classList.remove("delivery__collapse--show")
                } else
                    e.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild.value = ""
        }
        )); s.firstChild; )
            s.firstChild.remove();
        l.forEach((e=>{
            s.insertAdjacentHTML("afterbegin", "<li><span>".concat(e.district, "</span><span>").concat(e.price, "₽</span></li>"))
        }
        )),
        l = []
    }
    )),
    n.addEventListener("click", (()=>{
        e.forEach((e=>{
            e.checked = !1,
            e.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild.value = "",
            document.querySelector(".delivery__collapse").classList.remove("delivery__collapse--show")
        }
        ))
    }
    ))
}(),
function() {
    if (document.querySelector(".js-collapse-delivery-toggle")) {
        const e = document.querySelector(".js-collapse-delivery-toggle");
        e.addEventListener("click", (()=>{
            e.classList.toggle("delivery__toggle--show"),
            document.querySelector(".delivery__collapse").classList.toggle("delivery__collapse--show")
        }
        ))
    }
}();
const inputPhones = document.querySelectorAll(".input-phone");
inputPhones && Inputmask({
    mask: "+7(999) 999-99-99"
}).mask(inputPhones),
document.querySelector(".modal") && (document.querySelectorAll(".js-modal-open").forEach((e=>{
    e.addEventListener("click", (t=>{
        modalClose(),
        t.preventDefault();
        const n = e.getAttribute("data-target");
        document.querySelector(n).classList.add("modal--show"),
        scrollLock.disablePageScroll()
    }
    ))
}
)),
document.querySelectorAll(".js-modal-close").forEach((e=>{
    e.addEventListener("click", (()=>{
        document.querySelectorAll(".modal").forEach((e=>{
            e.classList.remove("modal--show"),
            scrollLock.enablePageScroll()
        }
        ))
    }
    ))
}
)),
document.querySelectorAll(".modal__overlay").forEach((e=>{
    e.addEventListener("click", (()=>{
        document.querySelectorAll(".modal").forEach((e=>{
            e.classList.remove("modal--show"),
            scrollLock.enablePageScroll()
        }
        ))
    }
    ))
}
)),
document.addEventListener("keydown", (e=>{
    27 === e.keyCode && document.querySelectorAll(".modal").forEach((e=>{
        e.classList.remove("modal--show"),
        scrollLock.enablePageScroll()
    }
    ))
}
)),
document.querySelectorAll(".js-modal-open").forEach((e=>{
    e.addEventListener("click", (()=>{
        document.getElementById("modal-step-1").classList.contains("modal--show") && (document.querySelector(".registration-form__steps li:nth-child(1)").style.opacity = 1),
        document.getElementById("modal-step-2").classList.contains("modal--show") && (document.querySelector("#modal-step-2 .registration-form__steps li:nth-child(3)").style.opacity = 1),
        document.getElementById("modal-step-3").classList.contains("modal--show") && (document.querySelector("#modal-step-3 .registration-form__steps li:nth-child(5)").style.opacity = 1),
        document.getElementById("modal-step-4").classList.contains("modal--show") && (document.querySelector("#modal-step-4 .registration-form__steps li:nth-child(7)").style.opacity = 1)
    }
    ))
}
)));
const modalClose = ()=>{
    document.querySelectorAll(".modal").forEach((e=>{
        e.classList.remove("modal--show")
    }
    ))
}
  , modalSubmit = ()=>{
    modalClose(),
    document.querySelector("#modal-submit").classList.add("modal--show"),
    scrollLock.disablePageScroll()
}
  , getNameUpload = e=>{
    let t = null;
    t = e.lastIndexOf("\\") ? e.lastIndexOf("\\") + 1 : e.lastIndexOf("/") + 1;
    const n = e.slice(t);
    document.querySelector(".file-form__label").innerHTML = n
}
  , getNameUploadNext = e=>{
    let t = null;
    t = e.lastIndexOf("\\") ? e.lastIndexOf("\\") + 1 : e.lastIndexOf("/") + 1;
    const n = e.slice(t);
    document.querySelector("#modal-step-4 .file-form__label").innerHTML = n
}
;
!function() {
    const e = document.querySelectorAll('.scene input[type="text"]:not(.input-hours)')
      , t = document.querySelectorAll('.scene input[type="email"]')
      , n = document.querySelectorAll('.scene input[type="file"]')
      , l = document.querySelectorAll(".scene textarea")
      , s = document.querySelectorAll("#modal-feedback .form__input")
      , o = document.querySelectorAll("#modal-step-1 .form__input")
      , i = document.querySelectorAll("#modal-step-2 .form__element")
      , r = document.querySelector("#modal-step-3 .form__input")
      , a = document.querySelectorAll("#modal-step-4 .form__element")
      , d = new Set
      , c = new Set
      , m = new Set
      , u = new Set;
    n.forEach((e=>{
        e.addEventListener("input", (()=>{
            e.value.length <= 0 ? (e.classList.add("form__input--danger"),
            e.parentElement.nextElementSibling.classList.add("form__hint--show")) : (e.classList.remove("form__input--danger"),
            e.parentElement.nextElementSibling.classList.remove("form__hint--show"))
        }
        )),
        e.addEventListener("blur", (()=>{
            e.value.length <= 0 && (e.classList.add("form__input--danger"),
            e.parentElement.nextElementSibling.classList.add("form__hint--show"))
        }
        )),
        e.addEventListener("focus", (()=>{
            e.classList.contains("form__input--danger") && (e.classList.remove("form__input--danger"),
            e.parentElement.nextElementSibling.classList.remove("form__hint--show"))
        }
        ))
    }
    )),
    l.forEach((e=>{
        e.addEventListener("input", (()=>{
            e.value.length <= 0 ? (e.classList.add("form__input--danger"),
            e.nextElementSibling.classList.add("form__hint--show")) : (e.classList.remove("form__input--danger"),
            e.nextElementSibling.classList.remove("form__hint--show"))
        }
        )),
        e.addEventListener("blur", (()=>{
            e.value.length <= 0 && (e.classList.add("form__input--danger"),
            e.nextElementSibling.classList.add("form__hint--show"))
        }
        )),
        e.addEventListener("focus", (()=>{
            e.classList.contains("form__input--danger") && (e.classList.remove("form__input--danger"),
            e.nextElementSibling.classList.remove("form__hint--show"))
        }
        ))
    }
    )),
    e.forEach((e=>{
        e.addEventListener("input", (()=>{
            e.value.length <= 0 ? (e.classList.add("form__input--danger"),
            e.nextElementSibling.classList.add("form__hint--show")) : (e.classList.remove("form__input--danger"),
            e.nextElementSibling.classList.remove("form__hint--show"))
        }
        )),
        e.addEventListener("blur", (()=>{
            e.value.length <= 0 && (e.classList.add("form__input--danger"),
            e.nextElementSibling.classList.add("form__hint--show"))
        }
        )),
        e.addEventListener("focus", (()=>{
            e.classList.contains("form__input--danger") && (e.classList.remove("form__input--danger"),
            e.nextElementSibling.classList.remove("form__hint--show"))
        }
        ))
    }
    )),
    t.forEach((e=>{
        e.addEventListener("input", (()=>{
            e.value.includes("@") ? (e.classList.remove("form__input--danger"),
            e.nextElementSibling.classList.remove("form__hint--show")) : (e.classList.add("form__input--danger"),
            e.nextElementSibling.classList.add("form__hint--show"))
        }
        )),
        e.addEventListener("blur", (()=>{
            e.value.includes("@") || (e.classList.add("form__input--danger"),
            e.nextElementSibling.classList.add("form__hint--show"))
        }
        )),
        e.addEventListener("focus", (()=>{
            e.classList.contains("form__input--danger") && (e.classList.remove("form__input--danger"),
            e.nextElementSibling.classList.remove("form__hint--show"))
        }
        ))
    }
    )),
    s.forEach((e=>{
        e.addEventListener("input", (()=>{
            e.value.length > 0 ? d.add(e.getAttribute("placeholder")) : 0 === e.value.length && d.delete(e.getAttribute("placeholder")),
            d.size === s.length ? document.querySelector(".js-submit-feedback").disabled = !1 : document.querySelector(".js-submit-feedback").disabled = !0
        }
        ))
    }
    )),
    o.forEach((e=>{
        e.addEventListener("input", (()=>{
            e.value.length > 0 ? c.add(e.getAttribute("placeholder")) : 0 === e.value.length && c.delete(e.getAttribute("placeholder")),
            c.size === o.length ? document.querySelector(".js-submit-step-1").disabled = !1 : document.querySelector(".js-submit-step-1").disabled = !0
        }
        ))
    }
    )),
    i.forEach(((e,t)=>{
        e.addEventListener("input", (()=>{
            e.value.length > 0 ? m.add(t) : 0 === e.value.length && m.delete(t),
            m.size === i.length ? document.querySelector(".js-submit-step-2").disabled = !1 : document.querySelector(".js-submit-step-2").disabled = !0
        }
        ))
    }
    )),
    document.querySelector(".js-add-places").addEventListener("click", (()=>{
        r.value.length > 0 ? document.querySelector(".js-submit-step-3").disabled = !1 : document.querySelector(".js-submit-step-3").disabled = !0
    }
    )),
    a.forEach(((e,t)=>{
        e.addEventListener("input", (()=>{
            e.value.length > 0 ? u.add(t) : 0 === e.value.length && u.delete(t),
            u.size === a.length ? document.querySelector(".js-submit-step-4").disabled = !1 : document.querySelector(".js-submit-step-4").disabled = !0
        }
        ))
    }
    ))
}();
